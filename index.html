<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liberion</title>
    <link href="style.css" rel="stylesheet">
    <script src="script.js" async></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>

<body>
    <nav class="nav-flex">
        <div class="menu">
            <ul class="menu-box">
                <li>
                    <a href="index.html" class="menutitle-ch">主页</a>
                </li>

                <li>
                    <a href="background.html" class="menutitle-ch">背景</a>
                </li>

                <li>
                    <a href="character.html" class="menutitle-ch">成员</a>
                </li>

                <li>
                    <a href="map.html" class="menutitle-ch">地图</a>
                </li>
                <li>
                    <a href="others.html" class="menutitle-ch">杂谈</a>
                </li>

            </ul>
        </div>
    </nav>

    <button id="language-switcher" class="lang-switcher-btn">
    <span class="zh-text-button">EN</span>
</button>

    <section class="background-picture">
        <img src="images/stars.png" id="stars">
        <img src="images/moon.png" id="moon">
        <img src="images/mountains_behind.png" id="mountains_behind">

        <h2 id="text">莱 贝 利 昂</h2>

        <img src="images/mountains_front.png" id="mountains_front">
    </section>
      <div class="sec">
        <p>这是一座由数十米高墙围绕着的孤城。城市呈圆心结构，由内向外逐区扩展</p>
    </div>
    <div class="sec">
        <p>整座城市仅有一处受严格管制的出口，居民未经许可不得踏出城墙半步。为了躲避城外安插的监视眼线，城市地下悄然形成了错综复杂的交通网络，其中隐藏着反抗组织的研究基地</p>
    </div>
    <div class="sec">
        <p>城外由新兴强国厄彼斐罗掌控，这个基因编辑帝国通过预设公民职业与植入"服从基因"维持统治。在其强大的科技与经济压制下，周边小国虽名义独立，实则已沦为失去自主权的附属品。厄彼斐罗凭借基因技术打造了一个绝对服从的社会体系</p>
    </div>
    <div class="sec">
        <p>莱贝利昂城的诞生源于厄彼斐罗一场绝密的人体实验，政府为打造终极战争机器，冒险将人类与特殊物质融合。这场实验催生了携带异能因子的新人类，他们虽获得了改变现实的超凡能力，却也意外挣脱了服从基因的束缚，引发了统治危机。为平息事态，厄彼斐罗最终在国家边缘划出一片孤立领土，与异能者签订免战协议，这座被冠名为莱贝利昂的孤城，便成了所有幸存者被迫迁入的收容地与新家园</p>
    </div>
    <div class="sec">
        <p>异能者拥有四大能力体系：</p>
    </div>
    <div class="sec">
        <p>操控物体形态的"物能"、改变物质特性的"化能"、攻击精神的"灵能"，以及改造生物特质的"生能"</p>
    </div>
    <div class="sec">
        <p>这些超凡力量皆源自体内独特的异能因子，让持有者得以突破物理法则的限制</p>
    </div>
    <div class="sec">
        <p>在精心编织的"神之子民论"教化下，居民自视为被选中的高等存在。而那些未能觉醒异能的孩子，则被送往净化所接受强制改造, 幸存者成为女总裁实现野心的棋子</p>
    </div>
    <div class="sec">
        <p>莱贝利昂城的建立，从来不是一场简单的领土妥协。厄彼斐罗的统治阶层、军方以及那些藏身于幕后的研究机构，共同在此布下了一盘隐于幕后的棋局。高墙之内，不仅是流放者的栖身之所，更是一场精心编排的宏大实验</p>
    </div>
    <div class="sec">
        <p>一份缄默的剧本，早已注定了每一环区的宿命</p>
    </div>
    <div class="sec">
        <p>异能即诅咒，自由为奢望</p>
    </div>
    <div class="sec">
        <span class="typewords" data-text='[ "欢迎来到 莱贝利昂"]'></span>
        <!-- 闪烁的光标 -->
        <span class="mark"></span>
    </div>
   <section class="horizontal-scroll-section">
        <div class="horizontal-scroll-container">
            <div class="horizontal-scroll" id="scrollElement">
                <div class="card">
                    <div class="card-number">01</div>
                    <h2 class="card-title">卡片标题</h2>
                    <p class="card-content">这里是卡片的内容描述，可以放置任何您想要展示的信息。</p>
                </div>

                <div class="card">
                    <div class="card-number">02</div>
                    <h2 class="card-title">另一个卡片</h2>
                    <p class="card-content">横向滑动效果让内容展示更加生动和有趣。</p>
                </div>

                <div class="card">
                    <div class="card-number">03</div>
                    <h2 class="card-title">特色功能</h2>
                    <p class="card-content">支持触摸滑动、鼠标拖动和按钮导航。</p>
                </div>

                <div class="card">
                    <div class="card-number">04</div>
                    <h2 class="card-title">响应式设计</h2>
                    <p class="card-content">在各种设备上都能完美显示。</p>
                </div>

                <div class="card">
                    <div class="card-number">05</div>
                    <h2 class="card-title">平滑动画</h2>
                    <p class="card-content">流畅的滚动和交互动画效果。</p>
                </div>

                <div class="card">
                    <div class="card-number">06</div>
                    <h2 class="card-title">现代风格</h2>
                    <p class="card-content">简洁美观的UI设计。</p>
                </div>

                <div class="card">
                    <div class="card-number">07</div>
                    <h2 class="card-title">额外卡片</h2>
                    <p class="card-content">确保有足够的内容来横向滚动。</p>
                </div>
                <div class="empty-box" style="width: 10vw;"></div>
          
            </div>
        </div>
    </section>
    <script>
        let stars = document.getElementById('stars')
        let moon = document.getElementById('moon')
        let mountains_behind = document.getElementById('mountains_behind')
        let text = document.getElementById('text')
        let btn = document.getElementById('btn')
        let mountains_front = document.getElementById('mountains_front')
        let header = document.querySelector('header')

        window.addEventListener('scroll', function() {
            let value = window.scrollY;
            stars.style.left = value * 0.25 + 'px'
            moon.style.top = value * 1.05 + 'px'
            mountains_behind.style.top = value * 0.5 + 'px'
            mountains_front.style.top = value * 0 + 'px'
            text.style.marginRight = value * 4 + 'px'
            text.style.marginTop = value * 1.5 + 'px'
            btn.style.marginTop = value * 1.5 + 'px'
            header.style.top = value * 0.5 + 'px'
        })

        
        gsap.registerPlugin(ScrollTrigger);

        document.addEventListener('DOMContentLoaded', function() {
            // 计算横向滚动总宽度
            const scrollElement = document.querySelector('.horizontal-scroll');
            const scrollWidth = scrollElement.scrollWidth;
            const viewportWidth = window.innerWidth;

            // 设置GSAP动画
            gsap.to(".horizontal-scroll", {
                x: () => -(scrollWidth - viewportWidth) + "px",
                ease: "none",
                scrollTrigger: {
                    trigger: ".horizontal-scroll-section",
                    start: "top top",
                    end: () => "+=" + (scrollWidth - viewportWidth),
                    pin: true,
                    scrub: 1,
                    markers: false, // 调试
                    anticipatePin: 1,
                    invalidateOnRefresh: true
                }
            });


            window.addEventListener('resize', function() {
                ScrollTrigger.refresh();
            });
        });
        
        const boxes = document.querySelectorAll('.sec')

        window.addEventListener('scroll', checkBoxes)

        checkBoxes()

        function checkBoxes() {
            const triggerBottom = window.innerHeight / 5 * 4

            boxes.forEach(box => {
                const boxTop = box.getBoundingClientRect().top

                if (boxTop < triggerBottom) {
                    box.classList.add('show')
                } else {
                    box.classList.remove('show')
                }
            })
        }
    </script>

</body>

</html>