<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liberion</title>
    <link href="../style.css" rel="stylesheet">
        <script src="../script.js" async></script>
             <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>

<body>
    <nav class="nav-flex">
        <div class="menu">
            <ul class="menu-box">
                <li>
                    <a href="index.html" class="menutitle-ch">Home</a>
                </li>

                <li>
                    <a href="background.html" class="menutitle-ch">Background</a>
                </li>

                <li>
                    <a href="character.html" class="menutitle-ch">Members</a>
                </li>

                <li>
                    <a href="map.html" class="menutitle-ch">Map</a>
                </li>
                <li>
                    <a href="others.html" class="menutitle-ch">Others</a>
                </li>


            </ul>
       
        </div>
    </nav>
         <button id="language-switcher" class="lang-switcher-btn">
    <span class="en-text">中</span>
            </button>
    <section class="background-picture">
        <img src="../images/stars.png" id="stars">
        <img src="../images/moon.png" id="moon">
        <img src="../images/mountains_behind.png" id="mountains_behind">

        <h2 id="text">Liberion</h2>

        <img src="../images/mountains_front.png" id="mountains_front">
    </section>
       <div class="sec">
        <p>This is a solitary city encircled by walls dozens of meters high. The city follows a concentric layout, expanding outward from its center in distinct rings.</p>
    </div>
    <div class="sec">
        <p>The entire city possesses only one strictly regulated exit, and residents are forbidden from stepping beyond the walls without permission. To evade the surveillance networks installed outside the city, a complex labyrinth of subterranean passageways has been quietly woven beneath the surface, concealing the research bases of resistance organizations.</p>
    </div>
    <div class="sec">
        <p>Beyond the walls lies the domain of the rising superpower, Eupheloro. This gene-editing empire maintains its rule by predetermining citizens' professions and implanting "obedience genes." Under the overwhelming pressure of its advanced technology and economic might, the surrounding smaller nations, though nominally independent, have effectively been reduced to dependent vassals stripped of their autonomy. Through genetic engineering, Eupheloro has forged a social system of absolute compliance.</p>
    </div>
    <div class="sec">
        <p>The genesis of Liberion City stems from a top-secret human experiment conducted by Eupheloro. In a bid to create the ultimate war machine, the government recklessly attempted to fuse humans with special substances. This experiment gave birth to a new breed of humans carrying Ability Factors. While they gained transcendent powers to alter reality, they also, unexpectedly, broke free from the shackles of the obedience gene, triggering a crisis of control. To quell the situation, Eupheloro ultimately demarcated an isolated territory at its periphery, signing a non-aggression pact with the ability users. This solitary city, christened Liberion, became the forced sanctuary and new home for all survivors.</p>
    </div>
    <div class="sec">
        <p>Ability users possess four major power systems:</p>
    </div>
    <div class="sec">
        <p>Material Energy that controls the form and state of objects,Chemical Energy that alters the inherent properties of matter, Spiritual Energy that assails the mind and consciousness.
, and Biological Energy that transforms and manipulates living traits.</p>
    </div>
    <div class="sec">
        <p>These extraordinary powers all originate from the unique Ability Factors within their bodies, allowing the wielders to transcend the limitations of physical laws.</p>
    </div>
    <div class="sec">
        <p> Under the careful indoctrination of the fabricated "Children of the Gods" theory, the residents view themselves as a chosen, superior existence. Meanwhile, children who fail to awaken their abilities are sent to the Sanctuary for forced transformation, with the survivors becoming pawns in the Female President's ambitious schemes.</p>
    </div>
    <div class="sec">
        <p>The establishment of Liberion City was never a simple territorial compromise. The ruling class of Eupheloro, the military, and the research institutions lurking in the shadows have collectively orchestrated a hidden gambit here. Within the high walls lies not merely an exile's refuge, but a meticulously staged grand experiment.</p>
    </div>
    <div class="sec">
        <p>A silent script has long predetermined the fate of every ring.</p>
    </div>
    <div class="sec">
        <p>Ability is a curse; freedom, a distant mirage.</p>
    </div>
    <div class="sec">
        <span class="typewords" data-text='[ "Welcome to Liberion"]'></span>
        <!-- 闪烁的光标 -->
        <span class="mark"></span>
    </div>

 <section class="horizontal-scroll-section">
        <div class="horizontal-scroll-container">
            <div class="horizontal-scroll" id="scrollElement">
                <div class="card">
                    <div class="card-number">01</div>
                    <h2 class="card-title">卡片标题</h2>
                    <p class="card-content">这里是卡片的内容描述，可以放置任何您想要展示的信息。</p>
                </div>

                <div class="card">
                    <div class="card-number">02</div>
                    <h2 class="card-title">另一个卡片</h2>
                    <p class="card-content">横向滑动效果让内容展示更加生动和有趣。</p>
                </div>

                <div class="card">
                    <div class="card-number">03</div>
                    <h2 class="card-title">特色功能</h2>
                    <p class="card-content">支持触摸滑动、鼠标拖动和按钮导航。</p>
                </div>

                <div class="card">
                    <div class="card-number">04</div>
                    <h2 class="card-title">响应式设计</h2>
                    <p class="card-content">在各种设备上都能完美显示。</p>
                </div>

                <div class="card">
                    <div class="card-number">05</div>
                    <h2 class="card-title">平滑动画</h2>
                    <p class="card-content">流畅的滚动和交互动画效果。</p>
                </div>

                <div class="card">
                    <div class="card-number">06</div>
                    <h2 class="card-title">现代风格</h2>
                    <p class="card-content">简洁美观的UI设计。</p>
                </div>

                <div class="card">
                    <div class="card-number">07</div>
                    <h2 class="card-title">额外卡片</h2>
                    <p class="card-content">确保有足够的内容来横向滚动。</p>
                </div>
                <div class="empty-box" style="width: 10vw;"></div>
          
            </div>
        </div>
    </section>
    
    <script>
        let stars = document.getElementById('stars')
        let moon = document.getElementById('moon')
        let mountains_behind = document.getElementById('mountains_behind')
        let text = document.getElementById('text')
        let btn = document.getElementById('btn')
        let mountains_front = document.getElementById('mountains_front')
        let header = document.querySelector('header')

        window.addEventListener('scroll', function() {
            let value = window.scrollY;
            stars.style.left = value * 0.25 + 'px'
            moon.style.top = value * 1.05 + 'px'
            mountains_behind.style.top = value * 0.5 + 'px'
            mountains_front.style.top = value * 0 + 'px'
            text.style.marginRight = value * 4 + 'px'
            text.style.marginTop = value * 1.5 + 'px'
            btn.style.marginTop = value * 1.5 + 'px'
            header.style.top = value * 0.5 + 'px'
        })
        document.getElementById("language-switcher").addEventListener("click", function() {
            // Get current page filename (e.g. "index.html")
            const currentPage = window.location.pathname.split('/').pop();

            if (window.location.href.includes("/en/")) {
                // Currently English - switch to Chinese (go up one level)
                window.location.href = "../" + currentPage;
            } else {
                // Currently Chinese - switch to English (go to en subfolder)
                window.location.href = "en/" + currentPage;
            }
        });

        
        gsap.registerPlugin(ScrollTrigger);

        document.addEventListener('DOMContentLoaded', function() {
            // 计算横向滚动总宽度
            const scrollElement = document.querySelector('.horizontal-scroll');
            const scrollWidth = scrollElement.scrollWidth;
            const viewportWidth = window.innerWidth;

            // 设置GSAP动画
            gsap.to(".horizontal-scroll", {
                x: () => -(scrollWidth - viewportWidth) + "px",
                ease: "none",
                scrollTrigger: {
                    trigger: ".horizontal-scroll-section",
                    start: "top top",
                    end: () => "+=" + (scrollWidth - viewportWidth),
                    pin: true,
                    scrub: 1,
                    markers: false, // 调试
                    anticipatePin: 1,
                    invalidateOnRefresh: true
                }
            });


            window.addEventListener('resize', function() {
                ScrollTrigger.refresh();
            });
        });


        
        const boxes = document.querySelectorAll('.sec')

        window.addEventListener('scroll', checkBoxes)

        checkBoxes()

        function checkBoxes() {
            const triggerBottom = window.innerHeight / 5 * 4

            boxes.forEach(box => {
                const boxTop = box.getBoundingClientRect().top

                if (boxTop < triggerBottom) {
                    box.classList.add('show')
                } else {
                    box.classList.remove('show')
                }
            })
        }

        
    </script>

</body>

</html>
