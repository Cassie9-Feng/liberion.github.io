<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liberion</title>
    <link href="../style.css" rel="stylesheet">
        <script src="../script.js" async></script>
</head>

<body>
    <nav class="nav-flex">
        <div class="menu">
            <ul class="menu-box">
                <li>
                    <a href="index.html" class="menutitle">BACKGROUND</a>
                </li>

                <li>
                    <a href="organization.html" class="menutitle">ORGANIZATION</a>
                </li>

                <li>
                    <a href="character.html" class="menutitle">CHARACTER</a>
                </li>

                <li>
                    <a href="plot.html" class="menutitle">PLOT</a>
                </li>
                <li>
                    <a href="others.html" class="menutitle">MAP</a>
                </li>

            </ul>
       
        </div>
    </nav>
         <button id="language-switcher" class="lang-switcher-btn">
    <span class="en-text">中</span>
            </button>
    <section class="background-picture">
        <img src="../images/stars.png" id="stars">
        <img src="../images/moon.png" id="moon">
        <img src="../images/mountains_behind.png" id="mountains_behind">

        <h2 id="text">Liberion</h2>

        <img src="../images/mountains_front.png" id="mountains_front">
    </section>
    <div class="sec" id="sec">
        <h2>Parallax Scrolling Effects</h2>
        <p>(内容随意发挥)Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a. Lorem ipsum, dolor sit
            amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.Lorem ipsum, dolor sit amet consectetur adipiscing
            elit. Vero iste laboriosam iusto sapiente voluptatum a.<br><br>Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam
            iusto sapiente voluptatum a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.<br><br>Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum
            a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.Lorem ipsum, dolor sit
            amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.<br><br>Lorem ipsum, dolor sit amet consectetur adipiscing
            elit. Vero iste laboriosam iusto sapiente voluptatum a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam
            iusto sapiente voluptatum a.<br><br>Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum
            a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.Lorem ipsum, dolor sit amet
            consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.<br><br>Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a. Lorem ipsum, dolor sit amet consectetur adipiscing
            elit. Vero iste laboriosam iusto sapiente voluptatum a. Lorem ipsum, dolor sit amet consectetur adipiscing elit. Vero iste laboriosam iusto sapiente voluptatum a.</p>
    </div>

    <script>
        let stars = document.getElementById('stars')
        let moon = document.getElementById('moon')
        let mountains_behind = document.getElementById('mountains_behind')
        let text = document.getElementById('text')
        let btn = document.getElementById('btn')
        let mountains_front = document.getElementById('mountains_front')
        let header = document.querySelector('header')

        window.addEventListener('scroll', function() {
            let value = window.scrollY;
            stars.style.left = value * 0.25 + 'px'
            moon.style.top = value * 1.05 + 'px'
            mountains_behind.style.top = value * 0.5 + 'px'
            mountains_front.style.top = value * 0 + 'px'
            text.style.marginRight = value * 4 + 'px'
            text.style.marginTop = value * 1.5 + 'px'
            btn.style.marginTop = value * 1.5 + 'px'
            header.style.top = value * 0.5 + 'px'
        })
        document.getElementById("language-switcher").addEventListener("click", function() {
            // Get current page filename (e.g. "index.html")
            const currentPage = window.location.pathname.split('/').pop();

            if (window.location.href.includes("/en/")) {
                // Currently English - switch to Chinese (go up one level)
                window.location.href = "../" + currentPage;
            } else {
                // Currently Chinese - switch to English (go to en subfolder)
                window.location.href = "en/" + currentPage;
            }
        });

        
        gsap.registerPlugin(ScrollTrigger);

        document.addEventListener('DOMContentLoaded', function() {
            // 计算横向滚动总宽度
            const scrollElement = document.querySelector('.horizontal-scroll');
            const scrollWidth = scrollElement.scrollWidth;
            const viewportWidth = window.innerWidth;

            // 设置GSAP动画
            gsap.to(".horizontal-scroll", {
                x: () => -(scrollWidth - viewportWidth) + "px",
                ease: "none",
                scrollTrigger: {
                    trigger: ".horizontal-scroll-section",
                    start: "top top",
                    end: () => "+=" + (scrollWidth - viewportWidth),
                    pin: true,
                    scrub: 1,
                    markers: false, // 调试
                    anticipatePin: 1,
                    invalidateOnRefresh: true
                }
            });


            window.addEventListener('resize', function() {
                ScrollTrigger.refresh();
            });
        });
    </script>

</body>

</html>
